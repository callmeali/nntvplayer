/*
	v1.0
	author by ljb
	2018.8.6
	require jQuery
*/
(function(b){function e(){this.container=this.elementid=null;this.options={};this.userset={};this.vjs=null}var f={autoplay:!0,preload:!0,loop:!1,width:640,height:480};e.domid="player";e.prototype={init:function(a){var c=a.container;if(null==c||void 0==c)c=e.domid,document.write('<div id="'+c+'"></div>');this.container=c=b("#"+c);this.userset=a;this.setOptions();0<c.length&&this.buildHtml()},setOptions:function(){var a=this;a.options=b.extend({},f,a.userset);void 0!=a.options.videoid&&void 0==a.options.source&&
a.videoSource(function(){a.videojs()})},buildHtml:function(){this.elementid=Math.round(1E5*Math.random());this.container.append('<video id="vjs_'+this.elementid+'" class="video-js vjs-default-skin" controls>');this.videojs()},videojs:function(){if(void 0!=this.options.source){var a={};a.sources=[{src:this.options.source,type:"video/mp4"}];delete this.options.source;a=b.extend({},this.options,a);this.vjs=videojs("vjs_"+this.elementid,a);this.customVjs()}},customVjs:function(){var a=this.vjs,c=videojs.getComponent("Component"),
d=videojs.extend(c,{el:function(){return videojs.dom.createEl("div",{className:"vjs-logo"})}});videojs.registerComponent("logo",d);d.prototype.createEl("span");d=new d(a);a.controlBar.addChild(d);d=a.getChild("BigPlayButton");a.removeChild(d);c=new c(a);c.addChild(d);c.addClass("vjs-bigplay-container");a.addChild(c)},videoSource:function(a){var c=this,d="http://user.nntv.cn/nnplatform/index.php?mod=api&ac=tidecms&m=getvideourl&return=jsonback&inajax=1&globalid={0}&jsoncallback=?".replace("{0}",c.options.videoid);
b.getJSON(d,function(b){0==b.error?(b=b.url.replace(/vodcdn.nntv.cn/,"mvod.nntv.cn"),c.options.source=b,vType=b.slice(b.lastIndexOf(".")),a()):console.log("error:"+b.message+" "+d)})}};b.extend({nntvplayer:function(a){(new e).init(a)}});b.fn.extend({nntvplayer:function(a){0!=b(this).length&&(a.container=b(this).attr("id"),b.nntvplayer(a))}});b(document).ready(function(){var a=1;b(".nntvplayer").each(function(){_self=b(this);var c="nntvplayer"+a;_self.append('<div id="'+c+'"></div>');var d={},e=_self.attr("data-option");
null!=e&&void 0!=e&&(d=eval("({"+e+"})"));b("#"+c).nntvplayer(d);a++})})})(window.jQuery);