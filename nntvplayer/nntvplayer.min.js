/*
	v1.0
	author by ljb
	2018.8.6
	require jQuery
*/
(function(c){function f(){this.container=this.elementid=null;this.options={};this.userset={};this.vjs=null}var g={autoplay:!0,preload:!0,loop:!1,width:640,height:480};f.domid="player";f.prototype={init:function(a){var b=a.container;if(null==b||void 0==b)b=f.domid,document.write('<div id="'+b+'"></div>');this.container=b=c("#"+b);this.userset=a;this.setOptions();0<b.length&&this.buildHtml()},setOptions:function(){var a=this;a.options=c.extend({},g,a.userset);void 0!=a.options.videoid&&void 0==a.options.source&&a.videoSource(function(){a.videojs()})},buildHtml:function(){this.elementid=Math.round(1E5*Math.random());this.container.append('<video id="vjs_'+this.elementid+'" class="video-js vjs-default-skin" controls>');this.container.find("video").bind("contextmenu",function(){return!1});this.videojs()},videojs:function(){if(void 0!=this.options.source){var a={};a.sources=[{src:this.options.source,type:"video/mp4"}];delete this.options.source;a=c.extend({},this.options,a);this.vjs=videojs("vjs_"+this.elementid,a);this.customVjs()}},customVjs:function(){var a=this.vjs,b=videojs.getComponent("Component"),d=videojs.extend(b,{el:function(){return videojs.dom.createEl("div",{className:"vjs-logo"})}});videojs.registerComponent("logo",d);d.prototype.createEl("span");d=new d(a);a.controlBar.addChild(d);d=a.getChild("BigPlayButton");a.removeChild(d);b=new b(a);b.addChild(d);b.addClass("vjs-bigplay-container");a.addChild(b)},videoSource:function(a){var b=this,d="http://user.nntv.cn/nnplatform/index.php?mod=api&ac=tidecms&m=getvideourl&return=jsonback&inajax=1&globalid={0}&jsoncallback=?".replace("{0}",b.options.videoid);c.getJSON(d,function(e){0==e.error?(e=e.url.replace(/vodcdn.nntv.cn/,"mvod.nntv.cn"),b.options.source=e,vType=e.slice(e.lastIndexOf(".")),a()):console.log("error:"+e.message+" "+d)})}};c.extend({nntvplayer:function(a){(new f).init(a)}});c.fn.extend({nntvplayer:function(a){0!=c(this).length&&(a.container=c(this).attr("id"),c.nntvplayer(a))}});c(document).ready(function(){var a=1;c(".nntvplayer").each(function(){_self=c(this);var b="nntvplayer"+a;_self.append('<div id="'+b+'"></div>');var d={},e=_self.attr("data-option");null!=e&&void 0!=e&&(d=eval("({"+e+"})"));c("#"+b).nntvplayer(d);a++})});(function(){var a=function(a){var b=document.createElement("link");b.rel="stylesheet";b.type="text/css";b.href=a;document.getElementsByTagName("head")[0].appendChild(b)},b=function(){for(var a=document.scripts||document.getElementsByTagName("script"),b,c=a.length;0<c;c--)if(-1<a[c-1].src.indexOf("nntvplayer")){b=a[c-1].src.substring(0,a[c-1].src.lastIndexOf("/")+1);break}return b}();document.write(unescape("%3Cscript src='"+b+"video.min.js' type='text/javascript'%3E%3C/script%3E"));document.write(unescape("%3Cscript src='"+b+"lang/zh-CN.js' type='text/javascript'%3E%3C/script%3E"));a(b+"video-js.min.css");a(b+"nntvplayer.css")})()})(window.jQuery);